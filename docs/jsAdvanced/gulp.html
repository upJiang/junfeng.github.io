<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      å®‰è£…ä¾èµ– | Jiang's Blog
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/_assets/style.d3cbd45d.css">
    <link rel="modulepreload" href="/_assets/common-d6bd45c0.js">
    <link rel="modulepreload" href="/_assets/docs_jsAdvanced_gulp.md.958207e2.lean.js">
    <link rel="modulepreload" href="/_assets/app.bac4ca22.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="Jiangçš„ä¸ªäººåšå®¢">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="navbar"><!--[--><a class="title" aria-label="Jiang&#39;s Blog, back to home" href="/"><!----><span style="color:var(--accent-color);">Jiang&#39;s Blog</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/" target="" rel="">ğŸ¡é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="dropdown-wrapper"><button class="dropdown-title" type="button"><span>ğŸ“‘å­¦ä¹ ä¹‹æ—…</span><span class="right arrow"></span></button><ul class="nav-dropdown"><!--[--><li key="/docs/reStudy/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/reStudy/start" target="" rel="">ğŸ˜˜ é‡å­¦å‰ç«¯ <!----></a></div></li><li key="/docs/algorithm/dataStructures" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/algorithm/dataStructures" target="" rel="">ğŸ¤£ å‰ç«¯ç®—æ³• <!----></a></div></li><li key="/docs/babel/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/babel/start" target="" rel="">ğŸ˜Š babelé€šå…³ç§˜ç± <!----></a></div></li><li key="/docs/howReview/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/howReview/start" target="" rel="">ğŸ˜‡ å‰ç«¯é¢è¯•ä¹‹é“ <!----></a></div></li><!--]--></ul></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/jsBase/git" target="" rel="">ğŸ“šåŸºç¡€ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/interview/center" target="" rel="">ğŸ¤µé¢è¯• <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/jsAdvanced/vue3" target="" rel="">ğŸ™‡è¿›é˜¶ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/resources/learning" target="" rel="">ğŸ¤­èµ„æº&amp;å·¥å…· <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/work/h5" target="" rel="">ğŸ‰å·¥ä½œé—®é¢˜ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="external nav-link" href="https://github.com/upJiang" target="_blank" rel="noopener noreferrer">ğŸ§¾github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!--]--><!--[--><div class="nav-item"><a class="external nav-link" href="https://juejin.cn/user/862487522314366" target="_blank" rel="noopener noreferrer">ğŸ‘æ˜é‡‘ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!-- <AlgoliaSearchBox
              v-if="$site.themeConfig.algolia"
              :options="$site.themeConfig.algolia"
            /> --><!--]--><!--]--><!--]--><div class="sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class=""><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/" target="" rel="">ğŸ¡é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="dropdown-wrapper"><button class="dropdown-title" type="button"><span>ğŸ“‘å­¦ä¹ ä¹‹æ—…</span><span class="right arrow"></span></button><ul class="nav-dropdown"><!--[--><li key="/docs/reStudy/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/reStudy/start" target="" rel="">ğŸ˜˜ é‡å­¦å‰ç«¯ <!----></a></div></li><li key="/docs/algorithm/dataStructures" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/algorithm/dataStructures" target="" rel="">ğŸ¤£ å‰ç«¯ç®—æ³• <!----></a></div></li><li key="/docs/babel/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/babel/start" target="" rel="">ğŸ˜Š babelé€šå…³ç§˜ç± <!----></a></div></li><li key="/docs/howReview/start" class="dropdown-item"><!----><div class="nav-item"><a class="nav-link" href="/docs/howReview/start" target="" rel="">ğŸ˜‡ å‰ç«¯é¢è¯•ä¹‹é“ <!----></a></div></li><!--]--></ul></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/jsBase/git" target="" rel="">ğŸ“šåŸºç¡€ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/interview/center" target="" rel="">ğŸ¤µé¢è¯• <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/jsAdvanced/vue3" target="" rel="">ğŸ™‡è¿›é˜¶ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/resources/learning" target="" rel="">ğŸ¤­èµ„æº&amp;å·¥å…· <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/docs/work/h5" target="" rel="">ğŸ‰å·¥ä½œé—®é¢˜ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="external nav-link" href="https://github.com/upJiang" target="_blank" rel="noopener noreferrer">ğŸ§¾github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!--]--><!--[--><div class="nav-item"><a class="external nav-link" href="https://juejin.cn/user/862487522314366" target="_blank" rel="noopener noreferrer">ğŸ‘æ˜é‡‘ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!--]--><!--]--><ul class="sidebar"><!--[--><li class="sidebar-item"><p class="sidebar-link">è¿›é˜¶</p><ul class="sidebar-items"><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/ts">TS</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/vue3">vue3</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/vite">vite</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/pureFuntion">çº¯å‡½æ•°</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/nvm">nvmç®¡ç†node</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/cURL">cURL</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/husky">husky</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/jsAdvanced">jsåŸç†å­¦ä¹ è·¯çº¿</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/sentry">sentry</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/vueComponent">vue3çš„ä¸‰ç§ç»„ä»¶å°è£…</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/mock">mock</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/jiangVui">ç»„ä»¶åº“å¼€å‘</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/loadingHandle">è¯·æ±‚loadingå°è£…</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/standard">å‰ç«¯è§„èŒƒ</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/changelog">changelog</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/monitor">ç›‘æ§ä¸åŸ‹ç‚¹</a><!----></li><li class="sidebar-item"><a class="sidebar-link active" href="/docs/jsAdvanced/gulp">gulp</a><ul class="sidebar-items"><li class="sidebar-item"><a class="sidebar-link" href="#å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#ç»„åˆä»»åŠ¡">ç»„åˆä»»åŠ¡</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#gulp-è¿”å›">gulp è¿”å›</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#gulp-å®æˆ˜">gulp å®æˆ˜</a><ul class="sidebar-items"><li class="sidebar-item"><a class="sidebar-link" href="#åˆ›å»ºä»»åŠ¡">åˆ›å»ºä»»åŠ¡</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#å¤„ç†js">å¤„ç†js</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#å¤„ç†css">å¤„ç†css</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#å¤„ç†å›¾ç‰‡">å¤„ç†å›¾ç‰‡</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="#å¤„ç†less">å¤„ç†less</a><!----></li></ul></li></ul></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/performance">æ€§èƒ½ä¼˜åŒ–</a><!----></li><li class="sidebar-item"><a class="sidebar-link" href="/docs/jsAdvanced/server">æœåŠ¡å™¨çŸ¥è¯†</a><!----></li></ul></li><!--]--></ul><!--[--><!--[--><!--]--><!--]--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main><div class="content"><!--[--><!--[--><!--]--><!--]--><div class="md-header"><!-- <div class="md-title">{{ pageData.title }}</div> --><!-- {{ pageData.frontmatter.date }} --><div class="md-date">ä»Šæ—¥è¯—è¯æ¬£èµ</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span></div><!-- å³è¾¹å¯¼èˆª --><!-- <ul class="catalog">
      <li class="catalog-item" v-for="item in pageData.headers">
        <a class="level level-2" v-if="item.level == 2" :href="'#' + item.slug">
          {{ item.title }}
        </a>
        <a class="level level-3" v-if="item.level == 3" :href="'#' + item.slug">
          {{ item.title }}
        </a>
      </li>
    </ul> --><!-- mdä¸»å†…å®¹ --><div><p><a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">gulp å®˜ç½‘</a></p><h2 id="å®‰è£…ä¾èµ–"><a class="header-anchor" href="#å®‰è£…ä¾èµ–" aria-hidden="true">#</a> å®‰è£…ä¾èµ–</h2><div class="language-"><pre><code>// å…¨å±€å®‰è£… gulp-cli
npm install --global gulp-cli

// åœ¨é¡¹ç›®ä¸‹å®‰è£… gulpï¼Œç›®å‰æœ€æ–°æ˜¯4.0ç‰ˆæœ¬
// è¯­æ³•è·Ÿ3.0ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†3.0ç‰ˆæœ¬éœ€è¦ä½ç‰ˆæœ¬çš„nodeï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥ä½¿ç”¨æœ€æ–°çš„
yarn add gulp -D
</code></pre></div><h2 id="ç»„åˆä»»åŠ¡"><a class="header-anchor" href="#ç»„åˆä»»åŠ¡" aria-hidden="true">#</a> ç»„åˆä»»åŠ¡</h2><p>gulp ç»„åˆä»»åŠ¡ï¼Œå¯ä»¥ä»»æ„åµŒå¥—ä»»ä½•æ·±åº¦</p><ul><li>å¦‚æœéœ€è¦è®©ä»»åŠ¡ï¼ˆtaskï¼‰æŒ‰é¡ºåºæ‰§è¡Œï¼Œè¯·ä½¿ç”¨ <code>series()</code> æ–¹æ³•ã€‚</li><li>å¯¹äºå¸Œæœ›ä»¥æœ€å¤§å¹¶å‘æ¥è¿è¡Œçš„ä»»åŠ¡ï¼ˆtasksï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>parallel()</code> æ–¹æ³•å°†å®ƒä»¬ç»„åˆèµ·æ¥ã€‚</li></ul><div class="language-"><pre><code>const { series, parallel } = require(&#39;gulp&#39;);

function clean(cb) {
  // body omitted
  cb();
}

function css(cb) {
  // body omitted
  cb();
}

function javascript(cb) {
  // body omitted
  cb();
}

exports.build = series(clean, parallel(css, javascript));
</code></pre></div><p>å½“ä½¿ç”¨ <code>series()</code> ç»„åˆå¤šä¸ªä»»åŠ¡ï¼ˆtaskï¼‰æ—¶ï¼Œä»»ä½•ä¸€ä¸ªä»»åŠ¡ï¼ˆtaskï¼‰çš„é”™è¯¯å°†å¯¼è‡´æ•´ä¸ªä»»åŠ¡ç»„åˆç»“æŸï¼Œå¹¶ä¸”ä¸ä¼šè¿›ä¸€æ­¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚å½“ä½¿ç”¨ <code>parallel()</code> ç»„åˆå¤šä¸ªä»»åŠ¡ï¼ˆtaskï¼‰æ—¶ï¼Œä¸€ä¸ªä»»åŠ¡çš„é”™è¯¯å°†ç»“æŸæ•´ä¸ªä»»åŠ¡ç»„åˆçš„ç»“æŸï¼Œä½†æ˜¯å…¶ä»–å¹¶è¡Œçš„ä»»åŠ¡ï¼ˆtaskï¼‰å¯èƒ½ä¼šæ‰§è¡Œå®Œï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰æ‰§è¡Œå®Œã€‚</p><p>gulp <code>ä¸å†æ”¯æŒåŒæ­¥ä»»åŠ¡</code>ï¼ˆSynchronous tasksï¼‰ã€‚å› ä¸ºåŒæ­¥ä»»åŠ¡å¸¸å¸¸ä¼šå¯¼è‡´éš¾ä»¥è°ƒè¯•çš„ç»†å¾®é”™è¯¯ï¼Œä¾‹å¦‚å¿˜è®°ä»ä»»åŠ¡ï¼ˆtaskï¼‰ä¸­è¿”å› streamã€‚</p><h2 id="gulp-è¿”å›"><a class="header-anchor" href="#gulp-è¿”å›" aria-hidden="true">#</a> gulp è¿”å›</h2><p>gulp ä»»åŠ¡å¿…é¡»è¦æœ‰ returnï¼Œè¿”å›æ–¹å¼æœ‰å¦‚ä¸‹å‡ ç§:</p><ul><li><p>stream</p><div class="language-"><pre><code>const { src, dest } = require(&#39;gulp&#39;);
function streamTask() {
    return src(&#39;*.js&#39;)
        .pipe(dest(&#39;output&#39;));
    }
exports.default = streamTask;
</code></pre></div></li><li><p>promise</p><div class="language-"><pre><code>function promiseTask() {
     return Promise.resolve(&#39;the value is ignored&#39;);
}
exports.default = promiseTask;
</code></pre></div></li><li><p>event emitter</p><div class="language-"><pre><code>const { EventEmitter } = require(&#39;events&#39;);
function eventEmitterTask() {
    const emitter = new EventEmitter();
    // Emit has to happen async otherwise gulp isn&#39;t listening yet
    setTimeout(() =&gt; emitter.emit(&#39;finish&#39;), 250);
    return emitter;
}

exports.default = eventEmitterTask;
</code></pre></div></li><li><p>child process</p><div class="language-"><pre><code>const { exec } = require(&#39;child_process&#39;);

function childProcessTask() {
    return exec(&#39;date&#39;);
}

exports.default = childProcessTask;
</code></pre></div></li><li><p>observable</p><div class="language-"><pre><code>const { Observable } = require(&#39;rxjs&#39;);

function observableTask() {
    return Observable.of(1, 2, 3);
}

exports.default = observableTask;
</code></pre></div></li><li><p>callback</p><p>å¦‚æœä»»åŠ¡ï¼ˆtaskï¼‰ä¸è¿”å›ä»»ä½•å†…å®¹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ callback æ¥æŒ‡ç¤ºä»»åŠ¡å·²å®Œæˆã€‚åœ¨å¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œcallback å°†ä½œä¸ºå”¯ä¸€ä¸€ä¸ªåä¸º cb() çš„å‚æ•°ä¼ é€’ç»™ä½ çš„ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚</p><div class="language-"><pre><code>function callbackTask(cb) {
      // `cb()` should be called by some async work
     cb();
}

exports.default = callbackTask;
</code></pre></div><p>å¦‚éœ€é€šè¿‡ callback æŠŠä»»åŠ¡ï¼ˆtaskï¼‰ä¸­çš„é”™è¯¯å‘ŠçŸ¥ gulpï¼Œè¯·å°† Error ä½œä¸º callback çš„å”¯ä¸€å‚æ•°ã€‚</p><div class="language-"><pre><code>function callbackError(cb) {
    // `cb()` should be called by some async work
     cb(new Error(&#39;kaboom&#39;));
}

exports.default = callbackError;
</code></pre></div><p>ç„¶è€Œï¼Œä½ é€šå¸¸ä¼šå°†æ­¤ callback å‡½æ•°ä¼ é€’ç»™å¦ä¸€ä¸ª API ï¼Œè€Œä¸æ˜¯è‡ªå·±è°ƒç”¨å®ƒã€‚</p><div class="language-"><pre><code>const fs = require(&#39;fs&#39;);

function passingCallback(cb) {
    fs.access(&#39;gulpfile.js&#39;, cb);
}

exports.default = passingCallback;
</code></pre></div></li><li><p>async/await</p><p>å¦‚æœä¸ä½¿ç”¨å‰é¢æä¾›åˆ°å‡ ç§æ–¹å¼ï¼Œä½ è¿˜å¯ä»¥å°†ä»»åŠ¡ï¼ˆtaskï¼‰å®šä¹‰ä¸ºä¸€ä¸ª async å‡½æ•°ï¼Œå®ƒå°†åˆ©ç”¨ promise å¯¹ä½ çš„ä»»åŠ¡ï¼ˆtaskï¼‰è¿›è¡ŒåŒ…è£…ã€‚è¿™å°†å…è®¸ä½ ä½¿ç”¨ await å¤„ç† promiseï¼Œå¹¶ä½¿ç”¨å…¶ä»–åŒæ­¥ä»£ç ã€‚</p><div class="language-"><pre><code>const fs = require(&#39;fs&#39;);

async function asyncAwaitTask() {
    const { version } = fs.readFileSync(&#39;package.json&#39;);
    console.log(version);
    await Promise.resolve(&#39;some result&#39;);
}

exports.default = asyncAwaitTask;
</code></pre></div></li></ul><p>å½“ä½ çœ‹åˆ° <em>&quot;Did you forget to signal async completion?&quot;</em> è­¦å‘Šæ—¶ï¼Œè¯´æ˜ä½ å¹¶æœªä½¿ç”¨å‰é¢æåˆ°çš„è¿”å›æ–¹å¼ã€‚ä½ éœ€è¦<strong>ä½¿ç”¨ callback æˆ–è¿”å› streamã€promiseã€event emitterã€child processã€observable</strong>æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h2 id="gulp-å®æˆ˜"><a class="header-anchor" href="#gulp-å®æˆ˜" aria-hidden="true">#</a> gulp å®æˆ˜</h2><h3 id="åˆ›å»ºä»»åŠ¡"><a class="header-anchor" href="#åˆ›å»ºä»»åŠ¡" aria-hidden="true">#</a> åˆ›å»ºä»»åŠ¡</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸ª <code>gulpfile.js</code> æ–‡ä»¶,æ‰§è¡Œ <code>gulp</code> å‘½ä»¤åï¼Œ<code>gulp</code> ä¼šå»è¯»å– <code>gulpfile.js</code> æ–‡ä»¶ï¼Œè¿™æ˜¯ <code>gulp</code> çš„å…¥å£æ–‡ä»¶ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤é€»è¾‘å¤„ç†éƒ½åœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œã€‚</p><p>å½“é¡¹ç›®ä½“é‡è¿‡å¤§æ—¶ï¼Œå¯ä»¥åœ¨æ ¹ç›®å½•å†…åˆ›å»ºä¸ª <code>gulpfile.js</code> æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…éƒ¨åˆ›å»º <code>index.js</code>ï¼Œå¯ä»¥åœ¨ <code>index.js</code> ä¸­å¼•å…¥ä¸åŒçš„å¤„ç†æ¨¡å—.</p><p>åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­éƒ½æ˜¯é€šè¿‡ <code>gulp.task</code> æ¥åˆ›å»ºä¸åŒçš„ä»»åŠ¡ï¼Œæ–°ç‰ˆæœ¬ä¸»è¦é€šè¿‡ <code>exports.xxx</code> æ¥å¯¼å‡ºä»»åŠ¡</p><div class="language-"><pre><code>function test(cb) {
 cb()
}

exports.test = test;
</code></pre></div><p>åœ¨æ§åˆ¶å°è¾“å…¥æŒ‡ä»¤gulp test</p><div class="language-"><pre><code>[16:41:29] Using gulpfile F:\gulp\gulpfile.js
[16:41:29] Starting &#39;test&#39;...
[16:41:29] Finished &#39;test&#39; after 1.95 ms
</code></pre></div><p>å¦‚æœå°† <code>exports.test = test</code>æ”¹ä¸º <code>exports.default=test</code>,åœ¨æ§åˆ¶å°ç›´æ¥è¾“å…¥ <code>gulp</code> å°±å¯ä»¥ç›´æ¥æ„å»ºäº†ã€‚</p><h3 id="å¤„ç†js"><a class="header-anchor" href="#å¤„ç†js" aria-hidden="true">#</a> å¤„ç†js</h3><p>å‹ç¼©jsã€åˆ›å»ºsourcemapã€é‡å‘½åjs</p><div class="language-"><pre><code>const {
  src, //gulpçš„å†…ç½®æ–¹æ³•
  dest
} = require(&#39;gulp&#39;);
//é‡å‘½åjsæ–‡ä»¶
const rename = require(&#39;gulp-rename&#39;);
const uglify = require(&#39;gulp-uglify&#39;);
const sourcemaps = require(&#39;gulp-sourcemaps&#39;);

function javascript() {
  return src([&#39;src/js/*.js&#39;, &#39;!src/js/*.min.js&#39;]) //1.åˆ›å»ºä¸€ä¸ªæµï¼Œä»srcè¯»å–
    //2.åˆ›å»ºsourcemap
    .pipe(sourcemaps.init()) 
    //pipeä¸ºgulpå†…çš„ä¸€ä¸ªæ–¹æ³•
    //ç”¨äºæµä¹‹é—´çš„é“¾æ¥
    // 3. å‹ç¼©æ–‡ä»¶
    .pipe(uglify())
    //4.é‡å‘½åï¼Œåç§°ååŠ min.js
    .pipe(rename({
      extname: &#39;.min.js&#39;
    }))
    //5.å°†sourcemapå†™å…¥
    .pipe(sourcemaps.write(&#39;./&#39;))
    // 6.å°†æ–‡ä»¶å†™å…¥build/jsç›®å½•ä¸‹
    .pipe(dest(&#39;build/js&#39;))
}

exports.javascript = javascript;
</code></pre></div><p>æ§åˆ¶å°è¾“å…¥æŒ‡ä»¤ gulp javascript</p><p>åœ¨build/jsä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶index.min.js ä»¥åŠindex.min.js.map</p><h3 id="å¤„ç†css"><a class="header-anchor" href="#å¤„ç†css" aria-hidden="true">#</a> å¤„ç†css</h3><p>å‹ç¼©cssã€åˆ›å»ºsourcemapã€é‡å‘½åcss</p><div class="language-"><pre><code>const {
  src,
  dest
} = require(&#39;gulp&#39;);
const minifyCSS = require(&#39;gulp-clean-css&#39;);
const sourcemaps = require(&#39;gulp-sourcemaps&#39;);
const autoprefixer = require(&#39;gulp-autoprefixer&#39;);

function css() {
  return src(&#39;src/css/*.css&#39;) //1.æµå…¥å£æ–‡ä»¶
    //2.åˆ›å»ºsourcemap
    .pipe(sourcemaps.init())
    //3.è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€
    .pipe(autoprefixer())
    // 4.å‹ç¼©css
    .pipe(minifyCSS())
    //5.å†™å…¥sourcemap
    .pipe(sourcemaps.write(&#39;./&#39;))
    //6.å†™å…¥æ–‡ä»¶
    .pipe(dest(&#39;build/css&#39;))
}

exports.css = css;
</code></pre></div><p>æ§åˆ¶å°è¾“å…¥æŒ‡ä»¤gulp css</p><p>åœ¨build/jsä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶index.min.css ä»¥åŠindex.min.css.map</p><h3 id="å¤„ç†å›¾ç‰‡"><a class="header-anchor" href="#å¤„ç†å›¾ç‰‡" aria-hidden="true">#</a> å¤„ç†å›¾ç‰‡</h3><div class="language-"><pre><code>const {
  src,
  dest
} = require(&#39;gulp&#39;);
const imagemin = require(&#39;gulp-imagemin&#39;)

function image() {
  return src(&#39;src/images/*.*&#39;) // 1. åˆ›å»ºè¾“å…¥æµ
    // 2. å‹ç¼©å›¾ç‰‡
    .pipe(imagemin({
      progressive: true
    }))
    // 3. å†™å…¥æ–‡ä»¶
    .pipe(dest(&#39;build/images&#39;))
}

exports.image = image;
</code></pre></div><p>æ§åˆ¶å°è¾“å…¥æŒ‡ä»¤gulp image,å¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„å‹ç¼©æ¯”ä¾‹</p><div class="language-"><pre><code>[17:00:07] Using gulpfile F:\gulp-demo\gulpfile.js
[17:00:07] Starting &#39;image&#39;...
[17:00:19] gulp-imagemin: Minified 3 images (saved 449 kB - 35.5%)
[17:00:19] Finished &#39;image&#39; after 12 s
</code></pre></div><h3 id="å¤„ç†less"><a class="header-anchor" href="#å¤„ç†less" aria-hidden="true">#</a> å¤„ç†less</h3><div class="language-"><pre><code>const {
  src,
  dest
} = require(&#39;gulp&#39;);
const gulpLess = require(&#39;gulp-less&#39;);
const minifyCss = require(&#39;gulp-clean-css&#39;)
const sourcemaps = require(&#39;gulp-sourcemaps&#39;);
const rename = require(&#39;gulp-rename&#39;);

function less() {
  return src(&#39;src/less/**.less&#39;) //1.åˆ›å»ºè¾“å…¥æµ
    //2.åˆ›å»ºsourcemap
    .pipe(sourcemaps.init())
    //3.lessè½¬ä¸ºcss
    .pipe(gulpLess())
    //4.å‹ç¼©css
    .pipe(minifyCss())
    //5.ä¿®æ”¹åç§°
    .pipe(rename({extname: &#39;.min.css&#39;}))
    //6.å†™å…¥sourcemap
    .pipe(sourcemaps.write(&#39;./&#39;))
    //7.å†™å…¥æ–‡ä»¶
    .pipe(dest(&#39;build/less&#39;))
}

exports.less = less;
</code></pre></div><p>æ§åˆ¶å°è¾“å…¥æŒ‡ä»¤ gulp less åœ¨ build/less ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ index.min.css ä»¥åŠ index.min.css.map</p><p><a href="https://github.com/upJiang/gulp-study" target="_blank" rel="noopener noreferrer">é¡¹ç›®åœ°å€</a></p></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><!--[--><!--[--><!--]--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docs.md\":\"67e0e6a2\",\"index.md\":\"edacb7d2\",\"README.md\":\"4128f4cd\",\"tags.md\":\"9d596c8e\",\"docs_algorithm_array.md\":\"cd37e67d\",\"docs_algorithm_bstTree.md\":\"2c5f112a\",\"docs_algorithm_chain.md\":\"886e6a2a\",\"docs_algorithm_chainCicle.md\":\"19bf3dcc\",\"docs_algorithm_chainHead.md\":\"d919a8ea\",\"docs_algorithm_complexity.md\":\"d90c660d\",\"docs_algorithm_dataStructures.md\":\"69c5d50f\",\"docs_algorithm_DFS.md\":\"6051aa2d\",\"docs_algorithm_dynamic.md\":\"f30f4f64\",\"docs_algorithm_ergodicTree.md\":\"e4ba1bb8\",\"docs_algorithm_queue.md\":\"30ce6b58\",\"docs_algorithm_sort.md\":\"691a9203\",\"docs_algorithm_stack.md\":\"15072771\",\"docs_algorithm_string.md\":\"3a38c3b1\",\"docs_algorithm_thinking.md\":\"4e7b9192\",\"docs_algorithm_tree.md\":\"9837f573\",\"docs_article_index.md\":\"1854e195\",\"docs_babel_start.md\":\"baa6a13e\",\"docs_howReview_start.md\":\"b3790e45\",\"docs_interview_22Ready.md\":\"a75a140a\",\"docs_interview_22StartSum.md\":\"eb76096b\",\"docs_interview_async.md\":\"48585586\",\"docs_interview_boxsizing.md\":\"334115fc\",\"docs_interview_center.md\":\"277dcf15\",\"docs_interview_css.md\":\"b460d1c7\",\"docs_interview_dataType.md\":\"2f121d67\",\"docs_interview_debounce.md\":\"dbe6dfc6\",\"docs_interview_defineProperty.md\":\"ec52fd21\",\"docs_interview_dns.md\":\"741137ec\",\"docs_interview_hashMode.md\":\"c62c4930\",\"docs_interview_httpCode.md\":\"cb81c76b\",\"docs_interview_index.md\":\"4819ed13\",\"docs_interview_jsBaseQuestion.md\":\"8216827e\",\"docs_interview_longList.md\":\"b445de56\",\"docs_interview_networkBaseQuestion.md\":\"d402d840\",\"docs_interview_process.md\":\"ef641a36\",\"docs_interview_promiseCicle.md\":\"07117c4b\",\"docs_interview_reactBaseQuestion.md\":\"a8b76b21\",\"docs_interview_repaint.md\":\"d3e9229b\",\"docs_interview_target.md\":\"598f6eb7\",\"docs_interview_URL.md\":\"26c1195b\",\"docs_interview_vueBaseQuestion.md\":\"a7a7a406\",\"docs_interview_writeQuestion.md\":\"b59b7251\",\"docs_jsAdvanced_changelog.md\":\"233da342\",\"docs_jsAdvanced_cURL.md\":\"5cb3753d\",\"docs_jsAdvanced_gulp.md\":\"958207e2\",\"docs_jsAdvanced_husky.md\":\"fb9e0602\",\"docs_jsAdvanced_index.md\":\"78cfa234\",\"docs_jsAdvanced_jiangVui.md\":\"cee38e52\",\"docs_jsAdvanced_jsAdvanced.md\":\"f4274792\",\"docs_jsAdvanced_loadingHandle.md\":\"adcef2c6\",\"docs_jsAdvanced_mock.md\":\"d1078c95\",\"docs_jsAdvanced_monitor.md\":\"5fcd7e05\",\"docs_jsAdvanced_nvm.md\":\"afb65ddb\",\"docs_jsAdvanced_performance.md\":\"98c310de\",\"docs_jsAdvanced_pureFuntion.md\":\"3031e2a5\",\"docs_jsAdvanced_sentry.md\":\"5bec9037\",\"docs_jsAdvanced_server.md\":\"e3847893\",\"docs_jsAdvanced_standard.md\":\"b3f8225c\",\"docs_jsAdvanced_ts.md\":\"a8705ef7\",\"docs_jsAdvanced_vite.md\":\"d84b2beb\",\"docs_jsAdvanced_vue3.md\":\"989e21ab\",\"docs_jsAdvanced_vueComponent.md\":\"95f40378\",\"docs_jsBase_bind.md\":\"7704be52\",\"docs_jsBase_Cache.md\":\"1a8d3cd4\",\"docs_jsBase_closure.md\":\"af360d78\",\"docs_jsBase_context.md\":\"80535d58\",\"docs_jsBase_copy.md\":\"40d90e39\",\"docs_jsBase_cors.md\":\"82f755c1\",\"docs_jsBase_CSRF.md\":\"0f0814f7\",\"docs_jsBase_css.md\":\"e5d21f2f\",\"docs_jsBase_es6.md\":\"5c049d05\",\"docs_jsBase_eventLoop.md\":\"7a6b0268\",\"docs_jsBase_garbage.md\":\"a125085d\",\"docs_jsBase_git.md\":\"4e8babae\",\"docs_jsBase_https.md\":\"65dd22dc\",\"docs_jsBase_index.md\":\"4b04cb6c\",\"docs_jsBase_jquery.md\":\"f3395bf4\",\"docs_jsBase_memory.md\":\"7c04f972\",\"docs_jsBase_module.md\":\"e5949fb6\",\"docs_jsBase_new.md\":\"bd8308c4\",\"docs_jsBase_prototype.md\":\"9dc246ac\",\"docs_jsBase_storage.md\":\"b3adeaa6\",\"docs_jsBase_this.md\":\"8fc81baa\",\"docs_jsBase_websocket.md\":\"1507f39c\",\"docs_resources_learning.md\":\"af5859f3\",\"docs_resources_tool.md\":\"1ba858f0\",\"docs_reStudy_browser_css.md\":\"b109f4b2\",\"docs_reStudy_browser_cssdom.md\":\"7588bcee\",\"docs_reStudy_browser_dom.md\":\"1645df31\",\"docs_reStudy_browser_domApi.md\":\"878db3e4\",\"docs_reStudy_browser_event.md\":\"133fa540\",\"docs_reStudy_browser_http.md\":\"aefa28ae\",\"docs_reStudy_browser_maker.md\":\"a584a598\",\"docs_reStudy_browser_print.md\":\"6f541cdf\",\"docs_reStudy_css_animation.md\":\"088ce694\",\"docs_reStudy_css_color.md\":\"305a53ea\",\"docs_reStudy_css_compose.md\":\"d7c7cb3f\",\"docs_reStudy_css_link.md\":\"ce8f5523\",\"docs_reStudy_css_rule.md\":\"1a9ef4b3\",\"docs_reStudy_css_select.md\":\"31d9217e\",\"docs_reStudy_html_ARIA.md\":\"ae5860a4\",\"docs_reStudy_html_DTD.md\":\"0f201e28\",\"docs_reStudy_html_head.md\":\"80c79dc2\",\"docs_reStudy_html_standard.md\":\"2a19421f\",\"docs_reStudy_html_tag.md\":\"718974b5\",\"docs_reStudy_html_tramslate.md\":\"b64e0c8d\",\"docs_reStudy_js_closure.md\":\"fa4b9116\",\"docs_reStudy_js_completion.md\":\"a2be3e79\",\"docs_reStudy_js_eventLoop.md\":\"e6c7402c\",\"docs_reStudy_js_function.md\":\"710f7ab3\",\"docs_reStudy_js_grammar.md\":\"8f61f7b4\",\"docs_reStudy_js_object.md\":\"94bc30b9\",\"docs_reStudy_js_prototype.md\":\"3c2eaed0\",\"docs_reStudy_js_semicolon.md\":\"c8ad84a8\",\"docs_reStudy_js_token.md\":\"0213be35\",\"docs_reStudy_js_type.md\":\"80fc2574\",\"docs_reStudy_other_question.md\":\"1ff699d9\",\"docs_reStudy_start.md\":\"9afdd8e6\",\"docs_reStudy_sum_architecture.md\":\"25c6ac11\",\"docs_reStudy_sum_continue.md\":\"2cc6c58f\",\"docs_reStudy_sum_performance.md\":\"8207603c\",\"docs_reStudy_sum_system.md\":\"e90b1975\",\"docs_reStudy_sum_tool.md\":\"5bf127ce\",\"docs_work_h5.md\":\"24bb8ff4\",\"docs_work_vue.md\":\"ed77ade1\"}")</script>
    <script type="module" async src="/_assets/app.bac4ca22.js"></script>
  </body>
</html>