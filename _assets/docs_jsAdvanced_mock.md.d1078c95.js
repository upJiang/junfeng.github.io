import{g as e,f as t,E as n}from"./common-d6bd45c0.js";const o='{"title":"","frontmatter":{},"relativePath":"docs/jsAdvanced/mock.md","lastUpdated":1648473509583.3616}';var r={};const p=n('<blockquote><p>使用mock模拟数据请求，在vue3+vite项目中我们将使用vite-plugin-mock插件来实现</p></blockquote><p><strong>1. 安装插件</strong></p><div class="language-"><pre><code>npm i mockjs -S\nnpm i vite-plugin-mock -D\n</code></pre></div><p><strong>2. 配置vite.config.ts</strong></p><div class="language-"><pre><code>import { viteMockServe } from &#39;vite-plugin-mock&#39;\nexport default {\n  plugins: [ viteMockServe({ supportTs: false }) ]\n}\n</code></pre></div><p><strong>3. 在项目根目录下创建mock文件夹，在mock文件夹下创建test.ts</strong></p><div class="language-"><pre><code>/mock/test.ts\n\nexport default [\n  {\n    url: &quot;/mock/getUser&quot;,\n    method: &quot;GET&quot;,\n    response: () =&gt; {\n      return {\n        code: 0,\n        message: &quot;ok&quot;,\n        result: [&quot;jiang&quot;, &quot;junfeng&quot;],\n      };\n    },\n  }\n]\n</code></pre></div><p><strong>4. 使用</strong></p><div class="language-"><pre><code>request({\n   url: &#39;/mock/getUser&#39;,\n   method: &quot;GET&quot;\n}).then((res)=&gt;{\n\n})\n</code></pre></div><p>设置代理的情况下要增加配置，但使用方法是一样的：</p><p>新建一个.env.development文件，写入 VITE_BASE_URL = &quot;/gapi&quot;</p><p>配置axios的baseURL</p><div class="language-"><pre><code>axios.create({\n  baseURL: import.meta.env.VITE_BASE_URL,\n  ...\n})\n</code></pre></div><p>在vite.config.ts中配置代理</p><div class="language-"><pre><code>//为了区分mock代理和服务器地址代理，建议设置两个，在mock的url中前面必须带有/mock\n//&#39;/gapi/mock&#39;用于mock代理，&#39;/gapi&#39; 用于代理服务器地址\n server: {\n    port: 8080,\n    proxy: {\n      &#39;/gapi/mock&#39;: {\n        target: &#39;http://localhost:8080/&#39;, //对mock进行代理，为了区别非mock的代理\n        changeOrigin: true,\n        rewrite: (path) =&gt; path.replace(/^\\/gapi/, &#39;&#39;)\n      },\n      &#39;/gapi&#39;: {\n        target: &#39;https://blog.junfeng530.xyz/&#39;,  //我的博客地址\n        changeOrigin: true,\n        rewrite: (path) =&gt; path.replace(/^\\/gapi/, &#39;&#39;)\n      },\n    },\n    open: true,\n  }\n</code></pre></div>',15);r.render=function(n,o,r,a,c,s){return t(),e("div",null,[p])};export default r;export{o as __pageData};
