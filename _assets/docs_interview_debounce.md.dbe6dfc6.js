import{g as n,f as e,j as t}from"./common-d6bd45c0.js";const i='{"title":"","frontmatter":{},"relativePath":"docs/interview/debounce.md","lastUpdated":1627829386581.2007}';var l={};const r=t("p",null,"节流： 多次触发同一个函数，同一段时间内只执行一次，所以节流会稀释函数的执行频率",-1),o=t("blockquote",null,[t("p",null,"可以看出节流的主要原理就是利用时间差（当前和上次执行）来过滤中间过程触发的函数执行。控制是否在开始时会立即触发一次，及最后一次触发是否执行,添加取消的功能")],-1),u=t("div",{class:"language-"},[t("pre",null,[t("code",null,"function throttle(fn, wait, options = { leading: true, trailing: false }) {\n    let timer;\n    let previous = 0;\n\n    const { leading, trailing } = options;\n\n    const throttled = function (...args) {\n        const now = +new Date();\n\n        if (leading === false && !previous) previous = now;\n        if (timer) clearTimeout(timer);\n\n        if (now - previous > wait) {\n            fn.apply(this, args);\n            previous = now;\n        } else if (trailing) {\n            // 更新timer\n            timer = setTimeout(() => {\n                fn.apply(this, args);\n                previous = 0;\n                timer = null;\n            }, wait);\n        }\n    }\n    throttled.cancel = () => {\n        clearTimeout(timer);\n        timer = null;\n        previous = 0;\n    }\n\n    return throttled;\n}\n")])],-1),a=t("p",null,"防抖： 按最后一次算。比如说“停止输入5s后才发送请求”，防止多次点击 (比较常用)",-1),s=t("blockquote",null,[t("p",null,"可以看出debounce函数的实现原理就是通过计时器延迟函数执行，短时间内再次触发时重置并添加新计时器。")],-1),m=t("div",{class:"language-"},[t("pre",null,[t("code",null,"//第一次触发可以立即执行，并且有取消功能\nfunction debounce(fn, wait = 1000, immediate = false) {\n  let timer = null;\n\n  function debounced(...args) {\n    // 重置计时器\n    if (timer) clearTimeout(timer);\n\n    // 首次立即执行\n    if (immediate && !timer) {\n      fn.apply(this, ...args);\n\n      timer = setTimeout(() => {\n        timer = null;\n      }, wait);\n\n      return;\n    }\n\n    // 新计时器\n    timer = setTimeout(() => {\n      fn.apply(this, ...args);\n      timer = null;\n    }, wait);\n  }\n\n  debounced.cancel = () => {\n    clearTimeout(timer);\n    timer = null;\n  };\n\n  return debounced;\n}\n")])],-1);l.render=function(t,i,l,c,d,p){return e(),n("div",null,[r,o,u,a,s,m])};export default l;export{i as __pageData};
